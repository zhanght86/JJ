function changeSubject(e){consolidateexeallobj.changeSubject(e)}var consolidateexeallobj;$(function(){function e(){if(0==window.orientation||180==window.orientation){$("body").attr("class","portrait"),orientation="portrait";var e=$(window).height(),a=$(".topic-analysis").height();return $(".consolidateexer-mainbody").height(e-a),!1}if(90==window.orientation||window.orientation==-90){$("body").attr("class","landscape"),orientation="landscape";var e=$(window).height(),a=$(".topic-analysis").height();return $(".consolidateexer-mainbody").height(e-a),!1}}var a=function(){var e=this;e.init(),e.params={phaseID:API.getQueryString("phaseID")||3,subjectID:API.getQueryString("subjectID")||7,subjectName:API.getQueryString("subjectName")||"初中数学",paperResource:API.getQueryString("paperResource")||"01",qidResource:API.getQueryString("qidResource")||"01",indexType:API.getQueryString("indexType")||"01"},e.pageCount=10,e.pageIndex=0,e.totalIndex=1,e.jdom.subjectName.html(e.params.subjectName),e.getData()};a.prototype={init:function(){var e=this;e.jdom={subjectDiv:$(".subjectDiv"),subjectName:$(".subjectDiv .subject-knowledge"),allchoose:$(".allchoose"),loading:$(".loading-tip")},e.bindUI()},bindUI:function(){var e=this;e.jdom.allchoose.on("click","a",function(a){e.goto1($(this),e.params.qidResource)}),e.jdom.subjectDiv.click(function(a){API.stopPropagation(a);var t=API.format("?paperResource={paperResource}&qidResource={qidResource}&indexType={indexType}",e.params)+"&phaseID={phaseID}&subjectID={subjectID}&subjectName={subjectName}";window.location.href="choosesubject.html?phaseID="+e.params.phaseID+"&subjectID="+e.params.subjectID+"&url="+encodeURIComponent(window.location.href.split("?")[0]+t)})},goto1:function(e,a){var t=this;"1"==e.attr("isPractice")?window.open("ExerciseScore.html?phaseID="+t.params.phaseID+"&subjectID="+t.params.subjectID+"&paperID="+e.attr("paperID")+"&paperResource="+t.params.paperResource+"&qidResource="+a,"ExerciseScore"):window.open("Exercise.html?paperID="+e.attr("paperID")+"&phaseID="+t.params.phaseID+"&subjectID="+t.params.subjectID+"&paperResource="+t.params.paperResource+"&qidResource="+a,"Exercise")},getData:function(){var e=this;return e.pageIndex>=e.totalIndex?($("#loadover").text("没有更多"),e.jdom.loading.css("visibility","visible"),void setTimeout(function(){e.jdom.loading.css("visibility","hidden")},1400)):($("#loadover").text("正在加载"),e.jdom.loading.css("visibility","visible"),e.pageIndex++,API.ajax("getAllRecommend",{phaseID:e.params.phaseID,subjectID:e.params.subjectID,indexType:e.params.indexType,pageIndex:e.pageIndex,pageCount:e.pageCount},function(a){e.jdom.loading.css("visibility","hidden"),a&&0==a.status?(e.render(a.data),e.totalIndex=a.totalIndex||1):e.totalIndex=1}),void $(window).scroll(function(){var a=$(window).scrollTop()>=$(document).height()-$(window).height()-50;a&&e.getData()}))},changeSubject:function(e){var a=this;a.pageIndex=0,a.totalIndex=1,e.subjectID&&(a.params.phaseID=e.phaseID,a.params.subjectID=e.subjectID,a.params.subjectName=e.subjectName,a.jdom.subjectName.html(e.subjectName),a.jdom.allchoose.empty(),a.getData())},createHtml:function(e){for(var a="",t=0,c=e.length;t<c;t++){var s=e[t];1==s.isPractice?(s.noeasy="",s.accuracy="accuracy accuracy-",s.accuracyp="accuracy-p1",s.percent<60?s.accuracy+="red":s.percent<80?s.accuracy+="yellow":s.accuracy+="green",s.percent_=s.percent+"%"):(s.noeasy="no-easy-wrong",s.accuracy="accuracy-respondence",s.accuracyp="accuracy-span1",s.percent_="去答题"),a+=API.format('<a paperID="{paperID}" isPractice="{isPractice}" class="autoData" href="javascript:;"> <div class="easy-wrong {noeasy} cf"> <div class="{accuracy}"> <p class="{accuracyp}">{percent_}</p> </div> <span class="choose-name">{paperName}</span> <p class="easy-p"> <span class="easy-date">推荐时间</span> <span class="easy-topic">{recommendDateStr}</span> </p> <p class="easy-p"> <span class="easy-date">题数：</span> <span class="easy-topic">{questionCount}题</span> </p> </div> </a>',s)}return a},render:function(a){var t=this,c=t.createHtml(a);1==t.totalIndex&&0==c.length&&(c='<div class="no-recommend autoData"><p class="no-recommend-tit">暂无推荐，去自主练习挑战下吧~</p> </div>'),t.jdom.loading.before(c),1==t.pageIndex&&e()}},consolidateexeallobj=new a,$(window).bind("orientationchange",function(a){e()})});